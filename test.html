<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="Keywords" content="blog"/>
    <meta name="Description" content="blog"/>
    <title>Simple</title>
    <link rel="shortcut icon" href="/static/favicon.png"/>
    <link rel="stylesheet" type="text/css" href="/main.css" />
</head>
<body>
<div class="main">
    <div class="header">
    	<ul id="pages">
            <li><a href="/">首页</a></li>
            <li><a href="/#/tags">标签</a></li>
            <li><a href="/#/archive">归档</a></li>
    	</ul>
    </div>
	<div class="wrap-header">
	<h1>
    <a href="/" id="title"></a>
	</h1>
	</div>
<div id="md" style="display: none;">
<!-- markdown -->
~~~~{cpp}

//#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <cctype>
using namespace std;
typedef long long ll;
typedef unsigned long long ull;

int iRead()
{
	int ret = 0;
	int ch;
	while(!isdigit(ch = getchar()) && ch != '-');
	bool bm = (ch == '-'); if(bm) ch = getchar();
	while(ret = ret * 10 + (ch - '0'), isdigit(ch = getchar()));
	return bm ? -ret : ret;
}

const int N = 300003;
const int STP = 100000;
struct iT;
iT *q[N];
struct iT
{
    iT *fa, *ch[2];
    int val, s;
    bool rev;
    #define iDir(c) ((c)->fa->ch[1] == (c))
    void up()
    {
        s = 1 + 
            (ch[0] ? ch[0]->s : 0) + 
            (ch[1] ? ch[1]->s : 0);
    }
    void down()
    {
        if(!rev) return;
        rev = 0;
        swap(ch[0], ch[1]);
        if(ch[0]) ch[0]->rev ^= 1;
        if(ch[1]) ch[1]->rev ^= 1;
    }
    void rot() // 把this转到fa的位置 
    {
        iT *f = fa;
        if(f->fa) f->fa->ch[iDir(f)] = this;
        int dr = iDir(this);
        fa = f->fa, f->fa = this;
        if(ch[!dr]) ch[!dr]->fa = f;
        f->ch[dr] = ch[!dr], ch[!dr] = f;
        f->up(), up();      // !!!! 此时f已经是this的孩子了 
    }
    iT *splay(iT *tag = NULL) // 把this转到tag下，返回this 
    {
        iT **p = q;
        for(iT *i = this; i != tag; i = i->fa)
            *p++ = i;
        while(p != q)
            (*--p)->down();
        for(; fa != tag; rot())
            if(fa->fa != tag)   // 双旋的情况 
                (iDir(this) == iDir(fa) ? fa : this)->rot();
        return this;
    }
    iT *select(int k) // 取rank k 从0开始 
    {
        down();
        int sl = ch[0] ? ch[0]->s : 0;
        if(sl == k)
            return this;
        else if(k < sl)
            return ch[0]->select(k);
        else
            return ch[1]->select(k - sl - 1);
    }
    iT *min()
    {
        iT *c = this;
        while(c->down(), c->ch[0])
            c = c->ch[0];
        return c;
    }
}ss[N], *sp = ss;
int arr[N];

// 建[l,r)的高度平衡splay 像线段树一样 感觉快一点 当然也可以一个个insert & splay 
iT *iMake(int l, int r, iT *f = NULL)
{
    if(l >= r) return NULL;
    int m = (l + r) >> 1;
    iT *c = sp++;
    *c = (iT){
        f, 
        {iMake(l, m, c), iMake(m + 1, r, c)}, 
        arr[m], r - l, false
    };
    return c;
}

int n;

int main()
{
    n = iRead();
    for(int i = 0; i < n; ++i)
        arr[i] = iRead();
    iT *rt = iMake(0, n);
    int i;
	for(i = 0; i <= STP; ++i)
	{
        int c = rt->min()->val;
        if(c == 1)
            break;
        if(c == n)          // !!!! 特判翻转全部的情况 
            rt->rev ^= 1;   // 否则下面会select(n) 然后炸掉 
        else
        {
            rt = rt->select(c)->splay(); // splay完，根已经换了 
            rt->ch[0]->rev ^= 1;
        }
	}
	printf("%d\n", i <= STP ? i : -1);
	fclose(stdout);
	return 0;
}

~~~~

<!-- markdown end -->
</div>
<div class="entry" id="main">
<!-- content -->
<pre class=" language-cpp"><code class=" language-cpp"><span class="token comment" spellcheck="true">
//#include &lt;iostream&gt;
</span><span class="token property">#include <span class="token property">&lt;cstdio&gt;</span></span>
<span class="token property">#include <span class="token property">&lt;cstdlib&gt;</span></span>
<span class="token property">#include <span class="token property">&lt;cstring&gt;</span></span>
<span class="token property">#include <span class="token property">&lt;cmath&gt;</span></span>
<span class="token property">#include <span class="token property">&lt;algorithm&gt;</span></span>
<span class="token property">#include <span class="token property">&lt;cctype&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ull<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">iRead<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ch<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isdigit<span class="token punctuation">(</span></span>ch <span class="token operator">=</span> <span class="token function">getchar<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> bm <span class="token operator">=</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span><span class="token punctuation">(</span>bm<span class="token punctuation">)</span> ch <span class="token operator">=</span> <span class="token function">getchar<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>ret <span class="token operator">=</span> ret <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span>ch <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">isdigit<span class="token punctuation">(</span></span>ch <span class="token operator">=</span> <span class="token function">getchar<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> bm <span class="token operator">?</span> <span class="token operator">-</span>ret <span class="token operator">:</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">300003</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> STP <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> iT<span class="token punctuation">;</span>
iT <span class="token operator">*</span>q<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> iT
<span class="token punctuation">{</span>
    iT <span class="token operator">*</span>fa<span class="token punctuation">,</span> <span class="token operator">*</span>ch<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> val<span class="token punctuation">,</span> s<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> rev<span class="token punctuation">;</span>
    <span class="token property">#define iDir(c) ((c)-&gt;fa-&gt;ch[1] == (c))</span>
    <span class="token keyword">void</span> <span class="token function">up<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        s <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> 
            <span class="token punctuation">(</span>ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;s <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
            <span class="token punctuation">(</span>ch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> ch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;s <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">down<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>rev<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        rev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">swap<span class="token punctuation">(</span></span>ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;rev <span class="token operator">^</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> ch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;rev <span class="token operator">^</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">rot<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"> // 把this转到fa的位置 
</span>    <span class="token punctuation">{</span>
        iT <span class="token operator">*</span>f <span class="token operator">=</span> fa<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token operator">-</span>&gt;fa<span class="token punctuation">)</span> f<span class="token operator">-</span>&gt;fa<span class="token operator">-</span>&gt;ch<span class="token punctuation">[</span><span class="token function">iDir<span class="token punctuation">(</span></span>f<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> dr <span class="token operator">=</span> <span class="token function">iDir<span class="token punctuation">(</span></span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fa <span class="token operator">=</span> f<span class="token operator">-</span>&gt;fa<span class="token punctuation">,</span> f<span class="token operator">-</span>&gt;fa <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ch<span class="token punctuation">[</span><span class="token operator">!</span>dr<span class="token punctuation">]</span><span class="token punctuation">)</span> ch<span class="token punctuation">[</span><span class="token operator">!</span>dr<span class="token punctuation">]</span><span class="token operator">-</span>&gt;fa <span class="token operator">=</span> f<span class="token punctuation">;</span>
        f<span class="token operator">-</span>&gt;ch<span class="token punctuation">[</span>dr<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">[</span><span class="token operator">!</span>dr<span class="token punctuation">]</span><span class="token punctuation">,</span> ch<span class="token punctuation">[</span><span class="token operator">!</span>dr<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">;</span>
        f<span class="token operator">-</span>&gt;<span class="token function">up<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">up<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true"> // !!!! 此时f已经是this的孩子了 
</span>    <span class="token punctuation">}</span>
    iT <span class="token operator">*</span><span class="token function">splay<span class="token punctuation">(</span></span>iT <span class="token operator">*</span>tag <span class="token operator">=</span> NULL<span class="token punctuation">)</span><span class="token comment" spellcheck="true"> // 把this转到tag下，返回this 
</span>    <span class="token punctuation">{</span>
        iT <span class="token operator">*</span><span class="token operator">*</span>p <span class="token operator">=</span> q<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>iT <span class="token operator">*</span>i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> tag<span class="token punctuation">;</span> i <span class="token operator">=</span> i<span class="token operator">-</span>&gt;fa<span class="token punctuation">)</span>
            <span class="token operator">*</span>p<span class="token operator">++</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>p <span class="token operator">!=</span> q<span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token operator">*</span><span class="token operator">--</span>p<span class="token punctuation">)</span><span class="token operator">-</span>&gt;<span class="token function">down<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> fa <span class="token operator">!=</span> tag<span class="token punctuation">;</span> <span class="token function">rot<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>fa<span class="token operator">-</span>&gt;fa <span class="token operator">!=</span> tag<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"> // 双旋的情况 
</span>                <span class="token punctuation">(</span><span class="token function">iDir<span class="token punctuation">(</span></span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">iDir<span class="token punctuation">(</span></span>fa<span class="token punctuation">)</span> <span class="token operator">?</span> fa <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">-</span>&gt;<span class="token function">rot<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    iT <span class="token operator">*</span><span class="token function">select<span class="token punctuation">(</span></span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token comment" spellcheck="true"> // 取rank k 从0开始 
</span>    <span class="token punctuation">{</span>
        <span class="token function">down<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> sl <span class="token operator">=</span> ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;s <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sl <span class="token operator">==</span> k<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> sl<span class="token punctuation">)</span>
            <span class="token keyword">return</span> ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;<span class="token function">select<span class="token punctuation">(</span></span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> ch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;<span class="token function">select<span class="token punctuation">(</span></span>k <span class="token operator">-</span> sl <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    iT <span class="token operator">*</span><span class="token function">min<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        iT <span class="token operator">*</span>c <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>c<span class="token operator">-</span>&gt;<span class="token function">down<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token operator">-</span>&gt;ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            c <span class="token operator">=</span> c<span class="token operator">-</span>&gt;ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>ss<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>sp <span class="token operator">=</span> ss<span class="token punctuation">;</span>
<span class="token keyword">int</span> arr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// 建[l,r)的高度平衡splay 像线段树一样 感觉快一点 当然也可以一个个insert &amp; splay 
</span>iT <span class="token operator">*</span><span class="token function">iMake<span class="token punctuation">(</span></span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> iT <span class="token operator">*</span>f <span class="token operator">=</span> NULL<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>l &gt;<span class="token operator">=</span> r<span class="token punctuation">)</span> <span class="token keyword">return</span> NULL<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> &gt;&gt; <span class="token number">1</span><span class="token punctuation">;</span>
    iT <span class="token operator">*</span>c <span class="token operator">=</span> sp<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token operator">*</span>c <span class="token operator">=</span> <span class="token punctuation">(</span>iT<span class="token punctuation">)</span><span class="token punctuation">{</span>
        f<span class="token punctuation">,</span> 
        <span class="token punctuation">{</span><span class="token function">iMake<span class="token punctuation">(</span></span>l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">iMake<span class="token punctuation">(</span></span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> r <span class="token operator">-</span> l<span class="token punctuation">,</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> n<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    n <span class="token operator">=</span> <span class="token function">iRead<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">iRead<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    iT <span class="token operator">*</span>rt <span class="token operator">=</span> <span class="token function">iMake<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> STP<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">int</span> c <span class="token operator">=</span> rt<span class="token operator">-</span>&gt;<span class="token function">min<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token operator">-</span>&gt;val<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>c <span class="token operator">==</span> n<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true"> // !!!! 特判翻转全部的情况 
</span>            rt<span class="token operator">-</span>&gt;rev <span class="token operator">^</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true"> // 否则下面会select(n) 然后炸掉 
</span>        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            rt <span class="token operator">=</span> rt<span class="token operator">-</span>&gt;<span class="token function">select<span class="token punctuation">(</span></span>c<span class="token punctuation">)</span><span class="token operator">-</span>&gt;<span class="token function">splay<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"> // splay完，根已经换了 
</span>            rt<span class="token operator">-</span>&gt;ch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>&gt;rev <span class="token operator">^</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf<span class="token punctuation">(</span></span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> i <span class="token operator">&lt;=</span> STP <span class="token operator">?</span> i <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fclose<span class="token punctuation">(</span></span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<!-- content end -->
</div>
<br>
<br>
    <div id="disqus_thread"></div>
	<div class="footer">
		<p>© Copyright 2016 by 尚弟, Designed by isnowfy & 尚弟</p>
	</div>
</div>
<script src="main.js"></script>
<script id="content" type="text/mustache">
    <h1>{{title}}</h1>
    <div class="tag">
    {{date}}
    {{#tags}}
    <a href="/#/tag/{{name}}">#{{name}}</a>
    {{/tags}}
    </div>
</script>
<script id="pagesTemplate" type="text/mustache">
    {{#pages}}
    <li>
        <a href="{{path}}">{{title}}</a>
    </li>
    {{/pages}}
</script>
<script>
$(document).ready(function() {
    $.ajax({
        url: "main.json",
        type: "GET",
        dataType: "json",
        success: function(data) {
            $("#title").html(data.name);
            var pagesTemplate = Hogan.compile($("#pagesTemplate").html());
            var pagesHtml = pagesTemplate.render({"pages": data.pages});
            $("#pages").append(pagesHtml);
            //path
            var path = "test.html";
            //path end
            var now = 0;
            for (var i = 0; i < data.posts.length; ++i)
                if (path == data.posts[i].path)
                    now = i;
            var post = data.posts[now];
            var tmp = post.tags.split(" ");
            var tags = [];
            for (var i = 0; i < tmp.length; ++i)
                if (tmp[i].length > 0)
                    tags.push({"name": tmp[i]});
            var contentTemplate = Hogan.compile($("#content").html());
            var contentHtml = contentTemplate.render({"title": post.title, "tags": tags, "date": post.date});
            $("#main").prepend(contentHtml);
            if (data.disqus_shortname.length > 0) {
                var disqus_shortname = data.disqus_shortname;
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            }
        }
    });
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ["\\(", "\\)"]], processEscapes: true}});
</script>
</body>
</html>
